{"version":3,"sources":["../../src/middleware/ensureContentType.js"],"names":[],"mappings":";;AAAA,OAAO,OAAP,GAAiB,UAAU,OAAV,EAAmB;AAClC,MAAM,eAAe,QAAQ,iBAAR,EAA2B,OAA3B,CAAf,CAD4B;;AAGlC,SAAO,SAAS,iBAAT,CAA4B,GAA5B,EAAiC,GAAjC,EAAsC,IAAtC,EAA4C;AACjD,QAAM,KAAK,IAAI,OAAJ,CAAY,cAAZ,CAAL,CAD2C;;AAGjD,QAAI,CAAC,EAAD,EAAK;AACP,aAAO,aAAa,GAAb,EAAkB,GAAlB,EAAuB,IAAvB,EAA6B,IAAI,KAAJ,CAAU,sBAAV,CAA7B,CAAP,CADO;KAAT;;AAIA,QAAI,GAAG,OAAH,CAAW,kBAAX,MAAmC,CAAC,CAAD,EAAI;AACzC,aAAO,aAAa,GAAb,EAAkB,GAAlB,EAAuB,IAAvB,EAA6B,IAAI,KAAJ,CAAU,sBAAV,CAA7B,CAAP,CADyC;KAA3C;;AAIA,WAXiD;GAA5C,CAH2B;CAAnB","file":"ensureContentType.js","sourcesContent":["module.exports = function (options) {\r\n  const errorHandler = require('../errorHandler')(options)\r\n\r\n  return function ensureContentType (req, res, next) {\r\n    const ct = req.headers['content-type']\r\n\r\n    if (!ct) {\r\n      return errorHandler(req, res, next)(new Error('missing_content_type'))\r\n    }\r\n\r\n    if (ct.indexOf('application/json') === -1) {\r\n      return errorHandler(req, res, next)(new Error('invalid_content_type'))\r\n    }\r\n\r\n    next()\r\n  }\r\n}\r\n"]}